DP.define(function(m){function r(a){return"border-box"==g(a,"-moz-box-sizing")}function n(a){return parseFloat(g(a,"border-top-width"))||0}function o(a){return parseFloat(g(a,"border-left-width"))||0}function h(a){return/^(?:body|html)$/i.test(a.tagName)}function p(a){return a===s||a===e||/^(?:body|html)$/i.test(a.tagName)}function t(a){return"static"!=g(a,"position")||h(a)}function z(a){return t(a)||/^(?:table|td|th)$/i.test(a.tagName)}function i(a){return $(a).el(0)}function q(a,c){var b=function(c){var c=
i(c),d=DP.makeArray(arguments).map(i);return a(c)?b.doc.apply(null,d):b.normal.apply(null,d)};b.doc=c.doc;delete c.doc;b.normal=c.normal;delete c.normal;return b}function u(a){for(var c=0,b=0;(a=a.parentNode)&&!h(a);)c+=a.scrollLeft,b+=a.scrollTop;return{left:c,top:b}}var e=document,j=e.documentElement,s=m.__HOST,k=!e.compatMode||"CSS1Compat"==e.compatMode?j:e.body,l;l=document.createElement("div");var v=document.createElement("div");l.style.height="0";l.appendChild(v);l=v.offsetParent===l;var g=
m.DOM.feature.curCSS,w=q(p,{doc:function(){return{width:k.clientWidth,height:k.clientHeight}},normal:function(a){return{width:a.offsetWidth,height:a.offsetHeight}}}),A=q(p,{doc:function(a){var a=w.doc(a),c=e.body;return{width:Math.max(k.scrollWidth,c.scrollWidth,a.width),height:Math.max(k.scrollHeight,c.scrollHeight,a.height)}},normal:function(a){return{width:a.scrollWidth,height:a.scrollHeight}}}),y=q(p,{doc:function(){return{left:0,top:0}},normal:function(a,c){var b;b={left:0,top:0};var f=m.UA.firefox,
d=a,e;if(a.getBoundingClientRect&&!m.UA.ios)b=a.getBoundingClientRect(),f="fixed"===g(a,"position")?{left:0,top:0}:x(j),d=u(a),b={left:b.left+d.left+f.left-j.clientLeft,top:b.top+d.top+f.top-j.clientTop};else if(!h(a)){do if(e=d.offsetParent,b.left+=d.offsetLeft,b.top+=d.offsetTop,f){if(r(d)||(b.left+=o(d),b.top+=n(d)),e&&"visible"!=g(e,"overflow"))b.left+=o(e),b.top+=n(e)}else d!==a&&m.UA.safari&&(b.left+=o(d),b.top+=n(d));while((d=e)&&!h(d));f&&!r(a)&&(b.left-=o(a),b.top-=n(a))}f=u(a);b={left:b.left-
f.left,top:b.top-f.top};c&&(f=y(c),b.left-=f.left-o(c),b.top-=f.top-n(c));return b}}),x=q(p,{doc:function(){var a=s;return{left:a.pageXOffset||k.scrollLeft,top:a.pageYOffset||k.scrollTop}},normal:function(a){return{left:a.scrollLeft,top:a.scrollTop}}});return{offset:y,size:function(a,c){return"scroll"===c?A(i(a)):w(i(a))},scroll:x,offsetParent:l?function(a){var a=i(a),c=g(a,"position"),b=j;if(!h(a)&&"fixed"!==c)for(c="static"===c?z:t;a=a.parentNode;)if(c(a)){b=a;break}return b}:function(a){var a=
i(a),c=j;if(!h(a)&&"fixed"!==g(a,"position"))try{c=a.offsetParent}catch(b){}return c}}});
